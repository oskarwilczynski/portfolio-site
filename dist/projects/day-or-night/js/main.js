// To see the unminified version visit https://github.com/oskarwilczynski/day-or-night/blob/master/js/main.js

"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function initMap(){var n=new google.maps.Map(document.getElementById("map"),{center:{lat:53.8008,lng:1.5491},zoom:3});n.addListener("click",function(t){document.querySelector("#text-header").textContent="Loading...",document.querySelector("#text-header").style.textDecoration="none";var e=t.latLng;n.setZoom(9),n.setCenter(e),fetchAllData(e.lat(),e.lng())})}function fetchAllData(n,r){var t,e;function a(t,e){return fetch("https://api.sunrise-sunset.org/json?lat=".concat(n,"&lng=").concat(r,"&date=").concat(e,"&formatted=0")).then(function(t){if(t.ok)return t.json();throw Error("Request rejected with status ".concat(t.status))}).then(function(t){return t.results}).catch(function(t){return console.error(t)})}Promise.all([(e=new Date,e.setDate(e.getDate()-1),a(0,e=e.toISOString().substr(0,10))),a(0,"today"),(t=new Date,t.setDate(t.getDate()-1),a(0,t=t.toISOString().substr(0,10)))]).then(function(t){var e=_slicedToArray(t,3);calcDaytime(e[0],e[1],e[2])})}function calcDaytime(t,e,n){var r=(new Date).toISOString().substr(0,19)+"+00:00";displayDaytime(r>=e.sunrise&&r<e.sunset||r>=t.sunrise&&r<t.sunset||r>=n.sunrise&&r<n.sunset||(e.sunset,!1))}function displayDaytime(t){var e=document.querySelector("#text-header");e.style.textDecorationColor=t?(e.textContent="It's a day!",e.style.textDecoration="underline","#ff4500"):(e.textContent="It's a night...",e.style.textDecoration="underline","#844f83")}